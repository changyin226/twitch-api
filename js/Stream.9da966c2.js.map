{"version":3,"sources":["webpack:///./src/views/Stream.vue?96ac","webpack:///./src/views/Stream.vue?9f7c","webpack:///src/views/Stream.vue","webpack:///./src/views/Stream.vue?13ac","webpack:///./src/views/Stream.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","user","staticClass","style","top","navHeight","attrs","name","profile_image_url","_v","_e","_s","display_name","stream","title","isLive","game_name","params","gameName","team","team_name","team_display_name","_l","tag","key","viewers","followers","description","theme","staticRenderFns","props","type","String","required","data","follows","tags","computed","isDarkMode","viewer_count","toString","replace","num","toFixed","parseInt","isPartner","broadcaster_type","encodeURIComponent","$store","state","mounted","commit","axios","all","getStream","getUser","methods","$http","get","api","headers","Authorization","getTeam","getFollows","getTags","component"],"mappings":"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","file":"js/Stream.9da966c2.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stream.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.user.id)?_c('div',{staticClass:\"stream-page\",style:({ top: (_vm.navHeight + \"px\") })},[_c('div',{staticClass:\"stream\"},[_c('iframe',{attrs:{\"src\":(\"https://player.twitch.tv/?channel=\" + _vm.name + \"&parent=changyin226.github.io\"),\"allowfullscreen\":\"true\",\"width\":\"100%\",\"height\":\"100%\"}}),_c('div',{staticClass:\"mx-30\"},[_c('div',{staticClass:\"stream-info\"},[_c('div',{staticClass:\"logo\"},[_c('img',{attrs:{\"src\":_vm.user.profile_image_url,\"alt\":\"實況主logo\"}}),(_vm.isLive)?_c('span',[_vm._v(\"LIVE\")]):_vm._e()]),_c('div',{staticClass:\"info\"},[_c('h2',[_vm._v(\" \"+_vm._s(_vm.user.display_name)+\" \"),(_vm.isPartner)?_c('i',{staticClass:\"fa fa-check\"}):_vm._e()]),(_vm.isLive)?_c('h3',[_vm._v(\" \"+_vm._s(_vm.stream.title)+\" \")]):_c('h3',[_vm._v(\" 該實況主目前尚未開台 \")]),_c('div',{staticClass:\"info-datail\"},[(_vm.isLive && _vm.stream.game_name)?_c('router-link',{attrs:{\"to\":{ name: 'GameStream', params: { name: _vm.gameName } }}},[_vm._v(\" \"+_vm._s(_vm.stream.game_name)+\" \")]):_vm._e(),(_vm.team.id)?_c('p',[_vm._v(\" 團隊： \"),_c('router-link',{attrs:{\"to\":{ name: 'Team', params: { name: _vm.team.team_name } }}},[_vm._v(\" \"+_vm._s(_vm.team.team_display_name)+\" \")])],1):_vm._e(),_vm._l((_vm.tags),function(tag){return _c('span',{key:tag,staticClass:\"tag\"},[_vm._v(_vm._s(tag))])})],2)]),(_vm.isLive)?_c('div',{staticClass:\"viewers\"},[_c('p',[_c('i',{staticClass:\"fa fa-user-o\"}),_vm._v(\" \"+_vm._s(_vm.viewers)+\" \")])]):_vm._e()]),_c('div',{staticClass:\"desc\"},[_c('h4',[_vm._v(\"關於 \"+_vm._s(_vm.user.display_name))]),_c('span',[_vm._v(_vm._s(_vm.followers)+\" 位追隨者\")]),_c('p',[_vm._v(_vm._s(_vm.user.description))])])])]),_c('div',{staticClass:\"chat\"},[_c('iframe',{key:_vm.theme,attrs:{\"id\":\"twitch-chat-embed\",\"src\":(\"https://www.twitch.tv/embed/\" + _vm.name + \"/chat?parent=changyin226.github.io&\" + _vm.theme),\"width\":\"100%\",\"height\":\"100%\"}})])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    v-if=\"user.id\"\n    class=\"stream-page\"\n    :style=\"{ top: `${navHeight}px` }\"\n  >\n    <div class=\"stream\">\n      <iframe\n        :src=\"`https://player.twitch.tv/?channel=${name}&parent=changyin226.github.io`\"\n        allowfullscreen=\"true\"\n        width=\"100%\"\n        height=\"100%\"\n      />\n      <div class=\"mx-30\">\n        <div class=\"stream-info\">\n          <div class=\"logo\">\n            <img\n              :src=\"user.profile_image_url\"\n              alt=\"實況主logo\"\n            >\n            <span v-if=\"isLive\">LIVE</span>\n          </div>\n          <div class=\"info\">\n            <h2>\n              {{ user.display_name }}\n              <i\n                v-if=\"isPartner\"\n                class=\"fa fa-check\"\n              />\n            </h2>\n            <h3 v-if=\"isLive\">\n              {{ stream.title }}\n            </h3>\n            <h3 v-else>\n              該實況主目前尚未開台\n            </h3>\n            <div class=\"info-datail\">\n              <router-link\n                v-if=\"isLive && stream.game_name\"\n                :to=\"{ name: 'GameStream', params: { name: gameName } }\"\n              >\n                {{ stream.game_name }}\n              </router-link>\n              <p v-if=\"team.id\">\n                團隊：\n                <router-link :to=\"{ name: 'Team', params: { name: team.team_name } }\">\n                  {{ team.team_display_name }}\n                </router-link>\n              </p>\n              <span\n                v-for=\"tag in tags\"\n                :key=\"tag\"\n                class=\"tag\"\n              >{{ tag }}</span>\n            </div>\n          </div>\n          <div\n            v-if=\"isLive\"\n            class=\"viewers\"\n          >\n            <p>\n              <i class=\"fa fa-user-o\" />\n              {{ viewers }}\n            </p>\n          </div>\n        </div>\n        <div class=\"desc\">\n          <h4>關於 {{ user.display_name }}</h4>\n          <span>{{ followers }} 位追隨者</span>\n          <p>{{ user.description }}</p>\n        </div>\n      </div>\n    </div>\n    <div class=\"chat\">\n      <iframe\n        id=\"twitch-chat-embed\"\n        :key=\"theme\"\n        :src=\"`https://www.twitch.tv/embed/${name}/chat?parent=changyin226.github.io&${theme}`\"\n        width=\"100%\"\n        height=\"100%\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    name: {\n      type: String,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      stream: {},\n      user: {},\n      team: {},\n      follows: 0,\n      tags: [],\n    };\n  },\n  computed: {\n    theme() {\n      const { isDarkMode } = this.$store.state;\n      return isDarkMode ? 'darkpopout' : 'popout';\n    },\n    viewers() {\n      return this.stream.viewer_count.toString().replace(/(\\d)(?=(?:\\d{3})+$)/g, '$1,');\n    },\n    followers() {\n      const { follows } = this;\n      let num = follows / 10000;\n      num = num.toFixed(1);\n      if (num >= 1 && num % 1 === 0) {\n        num = parseInt(num, 10);\n        num += '萬';\n        return num;\n      }\n      if (num > 1) {\n        num += '萬';\n        return num;\n      }\n      return follows.toString().replace(/(\\d)(?=(?:\\d{3})+$)/g, '$1,');\n    },\n    isLive() {\n      return !!this.stream;\n    },\n    isPartner() {\n      return this.user.broadcaster_type === 'partner';\n    },\n    gameName() {\n      return encodeURIComponent(this.stream.game_name);\n    },\n    navHeight() {\n      return this.$store.state.navHeight;\n    },\n  },\n  mounted() {\n    this.$store.commit('LOADING');\n    this.axios.all([this.getStream(), this.getUser()])\n      .then((response) => {\n        [this.stream] = response[0].data.data;\n        [this.user] = response[1].data.data;\n        return this.axios.all([this.getTeam(), this.getFollows(), this.getTags()]);\n      }).then((response) => {\n        if (response[0].data.data !== null) [this.team] = response[0].data.data;\n        this.follows = response[1].data.total;\n        const tags = [];\n        response[2].data.data.forEach((tag) => {\n          if (!tags.includes(tag.localization_names['zh-tw'])) {\n            tags.push(tag.localization_names['zh-tw']);\n          }\n        });\n        this.tags = tags;\n        this.$store.commit('LOADING');\n      }).catch((err) => {\n        this.$store.commit('LOADING');\n        this.$swal(err.response.data.message);\n      });\n  },\n  methods: {\n    getStream() {\n      const api = `https://api.twitch.tv/helix/streams?user_login=${this.name}`;\n      return this.$http.get(api, {\n        headers: {\n          Authorization: `Bearer ${process.env.VUE_APP_AUTHORIZATION}`,\n          'Client-Id': process.env.VUE_APP_CLIENT_ID,\n        },\n      });\n    },\n    getUser() {\n      const api = `https://api.twitch.tv/helix/users?login=${this.name}`;\n      return this.$http.get(api, {\n        headers: {\n          Authorization: `Bearer ${process.env.VUE_APP_AUTHORIZATION}`,\n          'Client-Id': process.env.VUE_APP_CLIENT_ID,\n        },\n      });\n    },\n    getTeam() {\n      const api = `https://api.twitch.tv/helix/teams/channel?broadcaster_id=${this.user.id}`;\n      return this.$http.get(api, {\n        headers: {\n          Authorization: `Bearer ${process.env.VUE_APP_AUTHORIZATION}`,\n          'Client-Id': process.env.VUE_APP_CLIENT_ID,\n        },\n      });\n    },\n    getFollows() {\n      const api = `https://api.twitch.tv/helix/users/follows?to_id=${this.user.id}`;\n      return this.$http.get(api, {\n        headers: {\n          Authorization: `Bearer ${process.env.VUE_APP_AUTHORIZATION}`,\n          'Client-Id': process.env.VUE_APP_CLIENT_ID,\n        },\n      });\n    },\n    getTags() {\n      const api = `https://api.twitch.tv/helix/streams/tags?broadcaster_id=${this.user.id}`;\n      return this.$http.get(api, {\n        headers: {\n          Authorization: `Bearer ${process.env.VUE_APP_AUTHORIZATION}`,\n          'Client-Id': process.env.VUE_APP_CLIENT_ID,\n        },\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.stream-page{\n  display: flex;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  .stream{\n    width: 100%;\n    color: var(--font-color);\n    display: flex;\n    flex-direction: column;\n  }\n  .mx-30{\n    margin: 0 30px;\n  }\n  .stream-info{\n    display: flex;\n    align-items: center;\n    padding: 30px 0;\n  }\n  .logo{\n    position: relative;\n    img{\n      width: 72px;\n      height: 72px;\n      border: 3px solid #a970ff;\n      border-radius: 50%;\n    }\n    span{\n      display: inline-block;\n      background: rgb(230, 24, 22);\n      font-size: 12px;\n      color: #fff;\n      font-weight: bold;\n      padding: 3px 5px;\n      border: 2px solid #000;\n      border-radius: 5px;\n      position: absolute;\n      left: 16px;\n      top: 55px;\n    }\n  }\n  .info{\n    font-weight: bold;\n    margin-right: auto;\n    padding: 0 15px;\n    h2{\n      display: flex;\n      align-items: center;\n      margin-bottom: 3px;\n      font-size: 18px;\n      i{\n        display: block;\n        font-size: 12px;\n        color: #fff;\n        padding: 2px;\n        background: rgb(159, 101, 255);\n        border-radius: 50%;\n        margin-left: 5px;\n      }\n    }\n    h3{\n      font-size: 14px;\n      line-height: 1.5;\n      margin-bottom: 3px;\n    }\n  }\n  .info-datail{\n    display: flex;\n    align-items: center;\n    a{\n      font-size: 14px;\n      color: rgb(159, 101, 255);\n      margin-right: 10px;\n      &:hover{\n        text-decoration: underline;\n      }\n    }\n    p{\n      font-size: 14px;\n      margin-right: 10px;\n    }\n  }\n  .viewers{\n    flex-shrink: 0;\n    color: rgb(255,119,117);\n  }\n  .desc{\n    width: 100%;\n    max-width: 1024px;\n    margin: 0 auto 30px auto;\n    padding: 30px;\n    background-color: var(--desc-bg-color);\n    text-align: center;\n    h4{\n      font-weight: bold;\n      font-size: 24px;\n      margin-bottom: 0.5rem;\n    }\n    span{\n      display: block;\n      font-size: 14px;\n      margin-bottom: 1rem;\n    }\n    P{\n      line-height: 1.2;\n    }\n  }\n  .chat{\n    width: 100%;\n    max-width: 400px;\n  }\n}\n@media (max-width: 768px) {\n  .stream-page{\n    flex-direction: column;\n    .stream{\n      height: 75%;\n    }\n    .stream-info{\n      padding: 10px 0;\n    }\n    .desc{\n      display: none;\n    }\n    .chat{\n      max-width: 100%;\n      height: 100%;\n    }\n  }\n}\n@media (max-width: 576px) {\n  .stream-page{\n    .mx-30{\n      display: none;\n    }\n    .stream{\n      height: 50%;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stream.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stream.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Stream.vue?vue&type=template&id=cbbc89a0&\"\nimport script from \"./Stream.vue?vue&type=script&lang=js&\"\nexport * from \"./Stream.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Stream.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}